# **7️⃣ Handling Forms & Validation**  

Forms are essential in web applications for user input. React provides different ways to handle forms efficiently, including controlled and uncontrolled components, form libraries, and validation tools like Yup.  

---

## **7.1 Controlled vs. Uncontrolled Components**  

### **📌 Controlled Components**  
- The form input is controlled by React state using `useState`.  
- Changes in input trigger state updates, making the UI predictable.  

✅ **Example of a Controlled Component:**  
```tsx
import { useState } from "react";

const ControlledForm = () => {
  const [name, setName] = useState("");

  const handleSubmit = (e) => {
    e.preventDefault();
    alert(`Submitted Name: ${name}`);
  };

  return (
    <form onSubmit={handleSubmit}>
      <input
        type="text"
        value={name} // Controlled by state
        onChange={(e) => setName(e.target.value)}
      />
      <button type="submit">Submit</button>
    </form>
  );
};

export default ControlledForm;
```

📌 **Why Use Controlled Components?**  
- Easier validation and dynamic UI updates.  
- Recommended for most form use cases.  

---

### **📌 Uncontrolled Components**  
- The form input is controlled by the **DOM** itself using `useRef`.  
- React does not track changes until submission.  

✅ **Example of an Uncontrolled Component:**  
```tsx
import { useRef } from "react";

const UncontrolledForm = () => {
  const nameRef = useRef(null);

  const handleSubmit = (e) => {
    e.preventDefault();
    alert(`Submitted Name: ${nameRef.current.value}`);
  };

  return (
    <form onSubmit={handleSubmit}>
      <input type="text" ref={nameRef} /> {/* Uses ref instead of state */}
      <button type="submit">Submit</button>
    </form>
  );
};

export default UncontrolledForm;
```

📌 **When to Use Uncontrolled Components?**  
- For simple forms where you don’t need real-time validation.  
- When integrating with non-React libraries (e.g., jQuery).  

---

## **7.2 useState vs. useRef for Forms**  

| Feature        | `useState` (Controlled) | `useRef` (Uncontrolled) |
|--------------|----------------------|----------------------|
| Updates UI   | ✅ Yes                 | ❌ No               |
| Performance  | ❌ Can re-render        | ✅ No re-renders   |
| Validation   | ✅ Easy to validate     | ❌ Harder to validate |
| Use Case     | Complex forms          | Simple forms, performance-sensitive cases |

---

## **7.3 Form Libraries (Formik & React Hook Form)**  

Handling forms manually can be cumbersome. Libraries like **Formik** and **React Hook Form** simplify form handling.

---

### **📌 Formik (Declarative State Management)**  
Formik makes form management and validation easier by handling state internally.  

🔹 **1️⃣ Install Formik**  
```sh
npm install formik
```

🔹 **2️⃣ Example Form with Formik**  
```tsx
import { Formik, Form, Field, ErrorMessage } from "formik";
import * as Yup from "yup";

const FormikForm = () => {
  return (
    <Formik
      initialValues={{ name: "", email: "" }}
      validationSchema={Yup.object({
        name: Yup.string().required("Name is required"),
        email: Yup.string().email("Invalid email").required("Email is required"),
      })}
      onSubmit={(values) => alert(JSON.stringify(values, null, 2))}
    >
      {() => (
        <Form>
          <label>Name:</label>
          <Field type="text" name="name" />
          <ErrorMessage name="name" component="div" style={{ color: "red" }} />

          <label>Email:</label>
          <Field type="email" name="email" />
          <ErrorMessage name="email" component="div" style={{ color: "red" }} />

          <button type="submit">Submit</button>
        </Form>
      )}
    </Formik>
  );
};

export default FormikForm;
```

📌 **Formik Advantages:**  
✅ Handles form state automatically.  
✅ Built-in validation support.  

---

### **📌 React Hook Form (Performance Optimized)**  
React Hook Form is **lighter** and has **better performance** because it uses uncontrolled inputs by default.

🔹 **1️⃣ Install React Hook Form**  
```sh
npm install react-hook-form
```

🔹 **2️⃣ Example Form with React Hook Form**  
```tsx
import { useForm } from "react-hook-form";

const HookForm = () => {
  const { register, handleSubmit, formState: { errors } } = useForm();

  const onSubmit = (data) => alert(JSON.stringify(data, null, 2));

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <label>Name:</label>
      <input {...register("name", { required: "Name is required" })} />
      <p style={{ color: "red" }}>{errors.name?.message}</p>

      <label>Email:</label>
      <input {...register("email", { required: "Email is required", pattern: { value: /\S+@\S+\.\S+/, message: "Invalid email" } })} />
      <p style={{ color: "red" }}>{errors.email?.message}</p>

      <button type="submit">Submit</button>
    </form>
  );
};

export default HookForm;
```

📌 **React Hook Form Advantages:**  
✅ Faster than Formik (no re-renders).  
✅ Works well with uncontrolled components.  

---

## **7.4 Yup for Schema Validation**  

Yup is a powerful validation library that works well with both Formik and React Hook Form.

🔹 **Install Yup**  
```sh
npm install yup
```

🔹 **Example Schema Using Yup**  
```tsx
import * as Yup from "yup";

const validationSchema = Yup.object({
  name: Yup.string().min(3, "Minimum 3 characters").required("Required"),
  email: Yup.string().email("Invalid email").required("Required"),
});
```

📌 **Integrating Yup with Formik**  
```tsx
<Formik
  initialValues={{ name: "", email: "" }}
  validationSchema={validationSchema}
  onSubmit={(values) => console.log(values)}
>
```

📌 **Integrating Yup with React Hook Form**  
```tsx
import { useForm } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";

const { register, handleSubmit } = useForm({
  resolver: yupResolver(validationSchema),
});
```

---

## **📌 Summary**  
✔ **Controlled vs. Uncontrolled Forms** – `useState` vs. `useRef`  
✔ **Formik vs. React Hook Form** – Form management libraries  
✔ **Yup for Validation** – Schema-based validation  

🔥 **Next Topic: 8️⃣ React Performance Optimization**  

Let me know if you need any modifications! 🚀