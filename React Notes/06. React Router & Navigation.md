# **6️⃣ React Router & Navigation**  

Routing is a crucial part of a React application, allowing users to navigate between different pages without full-page reloads. **React Router** provides a declarative approach to handle navigation in single-page applications (SPAs).  

---

## **6.1 Introduction to React Router**  

### **What is React Router?**  
React Router is a library that enables client-side navigation in React applications. It **updates the URL without refreshing the page**, enabling seamless transitions between views.  

### **Installation**  
To use React Router, install it via npm/yarn:  
```sh
npm install react-router-dom
```

---

## **6.2 Route Configuration & Nested Routes**  

### **Basic Routing Setup**  
🔹 **1️⃣ Import BrowserRouter and Define Routes**  
```tsx
import { BrowserRouter as Router, Route, Routes } from "react-router-dom";
import Home from "./Home";
import About from "./About";

function App() {
  return (
    <Router>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
      </Routes>
    </Router>
  );
}

export default App;
```

📌 **Key Concepts**  
- `<BrowserRouter>`: Wraps the entire app to enable routing.  
- `<Routes>`: Replaces older `<Switch>` in React Router v6.  
- `<Route>`: Defines a route with a path and an element.  

---

### **Nested Routes**  
✅ Useful when rendering components inside another route (e.g., a dashboard with sub-pages).  

🔹 **1️⃣ Define Nested Routes**  
```tsx
import { Route, Routes } from "react-router-dom";
import Dashboard from "./Dashboard";
import Profile from "./Profile";
import Settings from "./Settings";

function App() {
  return (
    <Routes>
      <Route path="/dashboard" element={<Dashboard />}>
        <Route path="profile" element={<Profile />} />
        <Route path="settings" element={<Settings />} />
      </Route>
    </Routes>
  );
}
```

🔹 **2️⃣ Add Outlet for Nested Components**  
```tsx
import { Outlet, Link } from "react-router-dom";

const Dashboard = () => {
  return (
    <div>
      <h2>Dashboard</h2>
      <nav>
        <Link to="profile">Profile</Link>
        <Link to="settings">Settings</Link>
      </nav>
      <Outlet /> {/* Renders nested routes here */}
    </div>
  );
};
```

📌 **The `Outlet` component acts as a placeholder for nested routes.**  

---

## **6.3 useNavigate vs. useHistory**  

### **Navigating Programmatically**  

🔹 **React Router v5 (`useHistory`)**  
```tsx
import { useHistory } from "react-router-dom";

const Component = () => {
  const history = useHistory();
  return <button onClick={() => history.push("/dashboard")}>Go to Dashboard</button>;
};
```

🔹 **React Router v6 (`useNavigate`)**  
```tsx
import { useNavigate } from "react-router-dom";

const Component = () => {
  const navigate = useNavigate();
  return <button onClick={() => navigate("/dashboard")}>Go to Dashboard</button>;
};
```

📌 **useNavigate is the replacement for useHistory in React Router v6.**  
- `navigate(-1)`: Go **back** to the previous page.  
- `navigate(1)`: Go **forward** to the next page.  

---

## **6.4 Query Parameters & URL Search Params**  

Query parameters allow dynamic data in the URL (e.g., `?id=123`).  

🔹 **Get Query Params Using `useSearchParams`**  
```tsx
import { useSearchParams } from "react-router-dom";

const UserProfile = () => {
  const [searchParams] = useSearchParams();
  const userId = searchParams.get("id"); // Get 'id' from URL

  return <h2>User ID: {userId}</h2>;
};
```

🔹 **Set Query Params Dynamically**  
```tsx
import { useNavigate } from "react-router-dom";

const SetParams = () => {
  const navigate = useNavigate();
  
  return (
    <button onClick={() => navigate("/profile?id=123")}>
      Set Query Param
    </button>
  );
};
```

📌 **Alternative:** Query params can also be extracted using `window.location.search`, but `useSearchParams` is recommended.  

---

## **6.5 Protected Routes & Authentication**  

### **Why Use Protected Routes?**  
✅ Prevents unauthenticated users from accessing certain pages.  
✅ Redirects users to the login page if they are not authenticated.  

### **Example: Creating a Protected Route**  
🔹 **1️⃣ Create an `AuthContext` to Manage Authentication**  
```tsx
import { createContext, useContext, useState } from "react";

const AuthContext = createContext(null);

export const AuthProvider = ({ children }) => {
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const login = () => setIsAuthenticated(true);
  const logout = () => setIsAuthenticated(false);

  return (
    <AuthContext.Provider value={{ isAuthenticated, login, logout }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => useContext(AuthContext);
```

🔹 **2️⃣ Create a Protected Route Component**  
```tsx
import { Navigate } from "react-router-dom";
import { useAuth } from "./AuthContext";

const ProtectedRoute = ({ children }) => {
  const { isAuthenticated } = useAuth();

  return isAuthenticated ? children : <Navigate to="/login" />;
};
```

🔹 **3️⃣ Implement Protected Routes in `App.js`**  
```tsx
import { BrowserRouter as Router, Route, Routes } from "react-router-dom";
import { AuthProvider } from "./AuthContext";
import Dashboard from "./Dashboard";
import Login from "./Login";
import ProtectedRoute from "./ProtectedRoute";

function App() {
  return (
    <AuthProvider>
      <Router>
        <Routes>
          <Route path="/login" element={<Login />} />
          <Route path="/dashboard" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />
        </Routes>
      </Router>
    </AuthProvider>
  );
}

export default App;
```

📌 **Now, only authenticated users can access `/dashboard`.**  

---

## **📌 Summary**  
✔ **Basic Routing** – `BrowserRouter`, `Routes`, `Route`  
✔ **Nested Routes** – `Outlet` for sub-pages  
✔ **Navigation** – `useNavigate()` for programmatic redirection  
✔ **Query Parameters** – `useSearchParams()` for handling query strings  
✔ **Protected Routes** – Higher-order components to restrict access  

🔥 **Next Topic: 7️⃣ React Performance Optimization**  

Let me know if you need more details! 🚀